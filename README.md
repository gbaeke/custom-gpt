# custom-gpt

Custom GPT to query baeke.info

See this blog post: https://blog.baeke.info/?p=4178

**Important:** The blog post uses an API that presents a "final answer" generated by an Azure OpenAI GPT model and based on Azure AI search context. That's ok if you want to use the API on its own. With a custom GPT in ChatGPT, it is more efficient to just present a JSON array to ChatGPT with the Azure AI search results. That allows ChatGPT to generate the answer, is faster, and avoids Azure OpenAI cost. If you want to use that method instead, check the `azure-ai-search` folder and use the  `app.py` from that folder. The OpenAPI spec is different, so use `openapi-search.json` instead when you define the custom action in your GPT.

## Modify .env

Add your Azure OpenAI API key and the Azure AI Search API key.

Generate and add the API key to protect this API.

## Modify app.py

Ensure the URLs to your Azure OpenAI instance and Azure AI Search instance are correct.

Set the correct index name.

## Build the container

Ensure deploy.sh is executable with `chmod +x deploy.sh`

Ensure Docker is installed.

Run `./deploy.sh build`

## Run the container locally

Run `./deploy.sh run`. Now test the POST request to http://localhost:8000/generate_request. Use the apicall.http file but modify it with the correct API key you set in .env

## Deploy to Azure Container Apps

Run  `./deploy.sh up`. This requires the Azure CLI on your machine. You should be logged in to your subscription with `az login`.